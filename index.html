<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <base href="./">
  <title>تهنئة المناسبات الإسلامية</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Aref+Ruqaa+Ink:wght@400;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="./css/styles.css" />
</head>

<body>
  <div class="stars"></div>

  <!-- Moon / Crescent synced with date (approx) -->
  <div class="moon-sky" aria-hidden="true">
    <div class="moon-wrap">
      <svg viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <radialGradient id="halo" cx="50%" cy="40%" r="60%">
            <stop offset="0" stop-color="rgba(243,211,137,.35)"/>
            <stop offset="1" stop-color="rgba(243,211,137,0)"/>
          </radialGradient>

          <mask id="phaseMask">
            <rect width="100%" height="100%" fill="black"/>
            <circle id="maskA" cx="450" cy="270" r="140" fill="white"/>
            <circle id="maskB" cx="450" cy="270" r="140" fill="black"/>
          </mask>

          <filter id="softGlow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="10" result="b"/>
            <feMerge>
              <feMergeNode in="b"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>

        <circle cx="450" cy="270" r="210" fill="url(#halo)" filter="url(#softGlow)"/>
        <circle cx="450" cy="270" r="140" fill="rgba(10,18,45,.85)"/>
        <g mask="url(#phaseMask)">
          <circle cx="450" cy="270" r="140" fill="rgba(243,211,137,.92)"/>
        </g>
        <circle cx="450" cy="270" r="140" fill="rgba(255,255,255,.06)"/>
      </svg>
    </div>
  </div>

  <!-- Audio -->
  <audio id="bgm" loop preload="auto"></audio>

  <!-- Gate -->
  <section id="gate" class="screen">
    <div class="panel fade-in">
      <div class="panel-inner">
        <h1 class="headline" id="gateHeadline">كل عام وأنتم بخير</h1>
        <p class="sub">أدخل اسمك لتظهر لك تهنئة خاصة ✨</p>

        <div class="form">
          <input id="nameInput" type="text" placeholder="اكتب اسمك هنا..." maxlength="40" autocomplete="name" />
          <button id="enterBtn">دخول</button>
        </div>

        <div id="err" class="error">اكتب اسمك يا جميل الأول</div>
        <p class="hint" id="hintLine">كل عام وأنتم بخير “عصام”.</p>
      </div>
    </div>
  </section>

  <!-- Main -->
  <section id="main" class="screen" style="display:none;">
    <div class="panel fade-in">
      <div class="ornaments">
        <!-- Garland + Sides (نفس الزينة اللي عملناها) -->
        <svg class="garland" viewBox="0 0 1200 260" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <defs>
            <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#f3d389" stop-opacity=".95"/>
              <stop offset="1" stop-color="#d8b15a" stop-opacity=".65"/>
            </linearGradient>
            <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="3" result="b"/>
              <feMerge>
                <feMergeNode in="b"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
            <path id="wire" d="M 0 80 C 240 200, 460 10, 700 110 C 900 210, 1050 40, 1200 120" />
          </defs>
          <use href="#wire" fill="none" stroke="url(#g1)" stroke-width="3" opacity=".75"/>
          <g filter="url(#glow)" opacity=".95">
            <g id="lantern">
              <path d="M0 0 C 8 -10, 22 -10, 30 0 L26 40 C 26 52, 4 52, 4 40 Z" fill="url(#g1)" opacity=".9"/>
              <path d="M10 6 C 12 10, 18 10, 20 6" stroke="#0b1130" stroke-opacity=".55" stroke-width="2" fill="none"/>
              <circle cx="15" cy="-8" r="4" fill="url(#g1)"/>
            </g>
            <g transform="translate(140,120)">
              <line x1="15" y1="-52" x2="15" y2="-10" stroke="rgba(243,211,137,.65)" stroke-width="2"/>
              <use href="#lantern" x="0" y="0"/>
            </g>
            <g transform="translate(320,90)">
              <line x1="15" y1="-40" x2="15" y2="-10" stroke="rgba(243,211,137,.6)" stroke-width="2"/>
              <use href="#lantern" x="0" y="0"/>
            </g>
            <g transform="translate(520,130)">
              <line x1="15" y1="-52" x2="15" y2="-10" stroke="rgba(243,211,137,.6)" stroke-width="2"/>
              <use href="#lantern" x="0" y="0"/>
            </g>
            <g transform="translate(720,100)">
              <line x1="15" y1="-44" x2="15" y2="-10" stroke="rgba(243,211,137,.6)" stroke-width="2"/>
              <use href="#lantern" x="0" y="0"/>
            </g>
            <g transform="translate(920,135)">
              <line x1="15" y1="-56" x2="15" y2="-10" stroke="rgba(243,211,137,.6)" stroke-width="2"/>
              <use href="#lantern" x="0" y="0"/>
            </g>
          </g>
        </svg>

        <svg class="side left" viewBox="0 0 180 900" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <defs>
            <linearGradient id="g2" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0" stop-color="#f3d389" stop-opacity=".55"/>
              <stop offset="1" stop-color="#d8b15a" stop-opacity=".15"/>
            </linearGradient>
          </defs>
          <path d="M 120 0 C 70 130, 150 210, 90 340 C 30 480, 150 590, 85 730 C 30 830, 110 900, 110 900"
                fill="none" stroke="url(#g2)" stroke-width="3" opacity=".9"/>
        </svg>

        <svg class="side right" viewBox="0 0 180 900" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <defs>
            <linearGradient id="g3" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0" stop-color="#f3d389" stop-opacity=".55"/>
              <stop offset="1" stop-color="#d8b15a" stop-opacity=".15"/>
            </linearGradient>
          </defs>
          <path d="M 120 0 C 70 130, 150 210, 90 340 C 30 480, 150 590, 85 730 C 30 830, 110 900, 110 900"
                fill="none" stroke="url(#g3)" stroke-width="3" opacity=".9"/>
        </svg>
      </div>

      <div class="main-wrap">
        <div class="audio-btn" id="audioBtn" title="تشغيل/إيقاف الصوت">
          <span class="dot"></span>
          <span id="audioLabel">الصوت يعمل</span>
        </div>

        <div class="panel-inner" style="padding-top:70px;">
          <h2 class="greet" id="titleLine">...</h2>
          <p class="name-line" id="nameLine">...</p>
          <p class="status-line" id="statusLine">...</p>

          <div class="countdown" aria-label="عداد">
            <div class="unit"><div class="num" id="d">0</div><div class="lbl">يوم</div></div>
            <div class="unit"><div class="num" id="h">0</div><div class="lbl">ساعة</div></div>
            <div class="unit"><div class="num" id="m">0</div><div class="lbl">دقيقة</div></div>
            <div class="unit"><div class="num" id="s">0</div><div class="lbl">ثانية</div></div>
          </div>

          <div class="note" id="sourceNote"></div>

          <div class="footer">
            <div>نسأل الله أن يتقبل منا ومنكم صالح الأعمال.</div>
            <div class="sig">أخيكم عصام</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script type="module" src="./js/app.js"></script>
</body>
</html>
